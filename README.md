# Futsal-Online-project

# 기능 설명

_선수 뽑기_

- 뽑을 때마다 유저의 guarantee 1 증가
- 1등급 선수를 뽑으면 뽑은 유저의 guarantee 0으로 초기화
- guarantee가 80이면, 다음 뽑기에 1등급 선수가 확정으로 나옴
- 선수를 중복으로 뽑으면 UserPlayer 테이블의 count 1 증가 (count는 여분의 선수 카드 개수를 뜻하며, 선수를 처음 뽑은 상태면 0임)

_선수 강화_

- 선수의 count(여분의 카드)를 재료로 소모해서, 확률적으로 선수의 스탯을 강화시키는 기능
- 강화 단수가 올라갈수록, 강화에 필요한 재료가 많아지고, 성공 확률이 낮아짐

_TranferMarket (이적시장)_

- 선수 등록 시 선수의 rare에 따라서 기준가 변경
- 트랜잭션을 활용해 이적시장 등록, 유저 팀 에서의 삭제와 같은 로직이 동시에 일어나게 설계
- 구매 시 보유한 캐시가 부족하면 구매를 하지 못하게 하고, 자신이 등록한 선수라면 구매를 하지 못하게 설계
- 등록한 선수를 취소하면 이적시장에 선수가 사라지고 유저 팀에 취소한 선수를 추가
- 목록 조회 시 이적시장에 올라와 있는 모든 선수들과 선수에 대한 능력치, 선수를 등록한 유저의 ID,이름이 출력되게 설정

_게임 플레이_

선수 구성

- 기본적으로 각팀은 3명으로 구성됨
- 선수들은 고유의 기본스탯을 가지고있으며, 이스탯에 비례하여 가중치를 설정

로스터 유효성 검사

- 팀의 로스터가 완성되지않았거나 상대팀이 구성되지않은경우 유효성 검사

매칭 시스템

- 유저의 점수에서 range(처음은 10)을 주어 매칭되지 않을때마다 점점 점수 범위를 늘림
- 점수로 매칭한 상대가 로스터를 가지고 있지 않다면 그 상대를 빼고 다시 매칭 시스템을 돌림

게임진행

- 각팀은 랜덤하게 선수를 뽑아 서로의 총스탯을 비교
- 총스탯이 높은쪽이 1골
- 만약 두팀의 총스탯이 같으면 무승부 처리

게임로그

- 경기중에 어느팀이 몇분에 어떤선수가 어떤팀이 넣었는지 기록함
